<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#4285f4">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Customer Data App</title>
  
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- NOTIFICATION -->
  <div id="notification" class="notification"></div>

  <!-- LOGIN SCREEN -->
  <div id="loginScreen" class="login-container">
    <div class="login-card">
      <h1 class="login-title">ğŸ” Login</h1>
      <div class="form-group">
        <label>Username</label>
        <input type="text" id="loginUsername" placeholder="Masukkan username">
      </div>
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="loginPassword" placeholder="Masukkan password">
      </div>
      <button class="btn btn-primary" onclick="login()">Login</button>
      <button id="installBtn" onclick="installPWA()">ğŸ“± Install Aplikasi</button>
    </div>
  </div>

  <!-- MAIN APP -->
  <div id="mainApp" class="hidden">
    <!-- HEADER -->
    <div class="header">
      <h1>ğŸ“‹ Customer Data</h1>
      <div class="user-info">
        <span id="userDisplay"></span>
        <button onclick="logout()" style="float:right; background:rgba(255,255,255,0.2); border:none; padding:6px 12px; border-radius:6px; color:white; cursor:pointer;">Logout</button>
      </div>
    </div>

    <!-- FORM INPUT -->
    <div id="formScreen" class="container">
      <div class="card">
        <h2 style="margin-bottom:20px; color:#333;">â• Input Data Baru</h2>
        
        <div class="form-group">
          <label>ID Pelanggan *</label>
          <input type="text" id="idPelanggan" placeholder="Contoh: CUST-001" required>
        </div>

        <div class="form-group">
          <label>Tanggal *</label>
          <input type="date" id="tanggal" required>
        </div>

        <div class="form-group">
          <label>Nama *</label>
          <input type="text" id="nama" placeholder="Nama lengkap pelanggan" required>
        </div>

        <div class="form-group">
          <label>Alamat *</label>
          <textarea id="alamat" placeholder="Alamat lengkap" required></textarea>
        </div>

        <div class="form-group">
          <label>Status *</label>
          <select id="status" required>
            <option value="">Pilih Status</option>
            <option value="Aktif">Aktif</option>
            <option value="Non-Aktif">Non-Aktif</option>
            <option value="Pending">Pending</option>
          </select>
        </div>

        <div class="form-group">
          <label>Foto (Opsional)</label>
          <div class="camera-container">
            <video id="video" autoplay playsinline></video>
            <canvas id="canvas"></canvas>
          </div>
          <div class="camera-controls">
            <button class="btn btn-primary btn-small" onclick="startCamera()">ğŸ“· Buka Kamera</button>
            <button class="btn btn-success btn-small" onclick="capturePhoto()" id="captureBtn" disabled>âœ“ Ambil Foto</button>
            <button class="btn btn-danger btn-small" onclick="resetCamera()">âœ• Reset</button>
          </div>
          <img id="preview" class="preview-img hidden">
        </div>

        <div class="form-group">
          <label>Catatan (Opsional)</label>
          <textarea id="catatan" placeholder="Catatan tambahan..."></textarea>
        </div>

        <button class="btn btn-success" onclick="saveData()" id="saveBtn">
          ğŸ’¾ Simpan Data
        </button>
      </div>
    </div>

    <!-- HISTORY SCREEN -->
    <div id="historyScreen" class="container hidden">
      <div class="card">
        <h2 style="margin-bottom:20px; color:#333;">ğŸ“œ Riwayat Data</h2>
        <button class="btn btn-primary" onclick="loadHistory()" style="margin-bottom:20px;">
          ğŸ”„ Refresh
        </button>
        <div id="historyList"></div>
      </div>
    </div>

    <!-- BOTTOM NAVIGATION -->
    <div class="bottom-nav">
      <button class="nav-item active" onclick="switchScreen('form')">
        <div class="nav-icon">â•</div>
        <div class="nav-label">Input</div>
      </button>
      <button class="nav-item" onclick="switchScreen('history')">
        <div class="nav-icon">ğŸ“œ</div>
        <div class="nav-label">Riwayat</div>
      </button>
    </div>
  </div>

  <script src="app.js"></script>

</body>
</html>